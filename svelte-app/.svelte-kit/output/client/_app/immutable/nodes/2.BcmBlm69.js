import{J as ke,a as we,S as Te,i as Ee,s as Pe,n as le,d as f,e as Se,f as G,h as r,K as Z,G as m,H as Q,j as d,k as C,L as ee,m as j,l as E,o as h,q as z,p as P,M as Y,N as oe,O as ae,P as Ce,Q as De,R as We,T as be,U as ce}from"../chunks/Bl0xz5QB.js";import"../chunks/IHki7fMi.js";function se(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function Ne(l,e){l.d(1),e.delete(l.key)}function Oe(l,e,n,t,a,i,s,o,c,g,w,I){let p=l.length,T=i.length,U=p;const S={};for(;U--;)S[l[U].key]=U;const M=[],q=new Map,A=new Map,L=[];for(U=T;U--;){const _=I(a,i,U),V=n(_);let N=s.get(V);N?L.push(()=>N.p(_,e)):(N=g(V,_),N.c()),q.set(V,M[U]=N),V in S&&A.set(V,Math.abs(U-S[V]))}const W=new Set,k=new Set;function y(_){we(_,1),_.m(o,w),s.set(_.key,_),w=_.first,T--}for(;p&&T;){const _=M[T-1],V=l[p-1],N=_.key,J=V.key;_===V?(w=_.first,p--,T--):q.has(J)?!s.has(N)||W.has(N)?y(_):k.has(J)?p--:A.get(N)>A.get(J)?(k.add(N),y(_)):(W.add(J),p--):(c(V,s),p--)}for(;p--;){const _=l[p];q.has(_.key)||c(_,s)}for(;T;)y(M[T-1]);return ke(L),M}const ge="openhabits:v1";function te(l=new Date){return l.toISOString().slice(0,10)}function ue(){return{created:Date.now(),version:2,seededStarterPack:!1,habits:[],gamification:{xp:0,level:1,achievements:[],totalCompletions:0,daily:{date:te(),xp:0,completions:0}}}}function Ie(){try{const l=localStorage.getItem(ge);return l?JSON.parse(l):ue()}catch{return ue()}}function re(l){{const e=structuredClone(l);e._lastSaved=Date.now(),localStorage.setItem(ge,JSON.stringify(e))}}const K=Ie();function Ae(){if(K.seededStarterPack||K.habits.length)return;[{name:"Hydration",description:"Drink a glass of water",days:[0,1,2,3,4,5,6],target:1},{name:"Reading",description:"Read 10 pages",days:[1,2,3,4,5],target:1},{name:"Mindfulness",description:"5 min mindfulness",days:[0,2,4,6],target:1}].forEach(e=>K.habits.push({id:crypto.randomUUID(),name:e.name,description:e.description,scheduleType:"daysOfWeek",days:e.days,target:e.target,history:{},streak:0,bestStreak:0})),K.seededStarterPack=!0,re(K)}Ae();function He(l){var t;const e=l.scheduleType==="timesPerWeek"?"timesPerWeek":"daysOfWeek",n={id:crypto.randomUUID(),name:l.name.trim(),description:((t=l.description)==null?void 0:t.trim())||"",scheduleType:e,days:e==="daysOfWeek"?l.days.map(Number).sort():[],timesPerWeek:e==="timesPerWeek"?Number(l.timesPerWeek)||3:void 0,target:Number(l.target)||1,history:{},streak:0,bestStreak:0};return K.habits.push(n),re(K),n}function fe(l){const e=K.habits.find(a=>a.id===l);if(!e)return;const n=te(),t=e.history[n]||0;if(e.history[n]=t+1,t<e.target&&e.history[n]>=e.target){const a=new Date;a.setDate(a.getDate()-1);const i=te(a),s=e.history[i]&&e.history[i]>=e.target;e.streak=s?e.streak+1:1,e.streak>e.bestStreak&&(e.bestStreak=e.streak)}re(K)}function ie(l){let e=0;for(let n=0;n<7;n++){const t=new Date;t.setDate(t.getDate()-n);const a=te(t);e+=(l.history[a]||0)>=l.target?1:0}return e}function de(l,e,n){const t=l.slice();return t[19]=e[n],t}function he(l,e,n){const t=l.slice();return t[22]=e[n],t[24]=n,t}function _e(l,e,n){const t=l.slice();return t[19]=e[n],t}function Ue(l){let e,n=se(l[4]()),t=[];for(let a=0;a<n.length;a+=1)t[a]=pe(_e(l,n,a));return{c(){e=h("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=d(a,"DIV",{class:!0});var i=C(e);for(let s=0;s<t.length;s+=1)t[s].l(i);i.forEach(f),this.h()},h(){m(e,"class","habits svelte-14cufwt")},m(a,i){G(a,e,i);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(a,i){if(i&48){n=se(a[4]());let s;for(s=0;s<n.length;s+=1){const o=_e(a,n,s);t[s]?t[s].p(o,i):(t[s]=pe(o),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=n.length}},d(a){a&&f(e),be(t,a)}}}function Le(l){let e,n="No quests due.";return{c(){e=h("p"),e.textContent=n,this.h()},l(t){e=d(t,"P",{style:!0,"data-svelte-h":!0}),ee(e)!=="svelte-1j2l1wf"&&(e.textContent=n),this.h()},h(){Q(e,"font-size",".7rem"),Q(e,"opacity",".6")},m(t,a){G(t,e,a)},p:le,d(t){t&&f(e)}}}function Me(l){let e,n=l[19].days.map(l[6]).join(", ")+"",t;return{c(){e=h("span"),t=P(n)},l(a){e=d(a,"SPAN",{});var i=C(e);t=E(i,n),i.forEach(f)},m(a,i){G(a,e,i),r(e,t)},p:le,d(a){a&&f(e)}}}function Ve(l){let e,n=ie(l[19])+"",t,a,i=l[19].timesPerWeek+"",s,o;return{c(){e=h("span"),t=P(n),a=P("/"),s=P(i),o=P(" wk")},l(c){e=d(c,"SPAN",{});var g=C(e);t=E(g,n),a=E(g,"/"),s=E(g,i),o=E(g," wk"),g.forEach(f)},m(c,g){G(c,e,g),r(e,t),r(e,a),r(e,s),r(e,o)},p:le,d(c){c&&f(e)}}}function pe(l){let e,n,t=l[19].name+"",a,i,s,o,c,g=l[19].streak+"",w,I,p,T,U=(l[19].history[te()]||0)+"",S,M,q=l[19].target+"",A,L,W,k="+1",y,_,V;function N(D,b){return D[19].scheduleType==="timesPerWeek"?Ve:Me}let F=N(l)(l);function O(){return l[7](l[19])}return{c(){e=h("div"),n=h("strong"),a=P(t),i=z(),s=h("div"),o=h("span"),c=P("ðŸ”¥ "),w=P(g),I=z(),F.c(),p=z(),T=h("span"),S=P(U),M=P("/"),A=P(q),L=z(),W=h("button"),W.textContent=k,y=z(),this.h()},l(D){e=d(D,"DIV",{class:!0});var b=C(e);n=d(b,"STRONG",{style:!0});var u=C(n);a=E(u,t),u.forEach(f),i=j(b),s=d(b,"DIV",{class:!0});var v=C(s);o=d(v,"SPAN",{});var B=C(o);c=E(B,"ðŸ”¥ "),w=E(B,g),B.forEach(f),I=j(v),F.l(v),p=j(v),T=d(v,"SPAN",{});var H=C(T);S=E(H,U),M=E(H,"/"),A=E(H,q),H.forEach(f),v.forEach(f),L=j(b),W=d(b,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(W)!=="svelte-1qgnnsf"&&(W.textContent=k),y=j(b),b.forEach(f),this.h()},h(){Q(n,"font-size",".85rem"),m(s,"class","meta svelte-14cufwt"),m(W,"class","svelte-14cufwt"),m(e,"class","card "+((l[19].history[te()]||0)>=l[19].target?"done":"")+" svelte-14cufwt")},m(D,b){G(D,e,b),r(e,n),r(n,a),r(e,i),r(e,s),r(s,o),r(o,c),r(o,w),r(s,I),F.m(s,null),r(s,p),r(s,T),r(T,S),r(T,M),r(T,A),r(e,L),r(e,W),r(e,y),_||(V=Z(W,"click",O),_=!0)},p(D,b){l=D,F.p(l,b)},d(D){D&&f(e),F.d(),_=!1,V()}}}function ve(l){let e,n,t,a,i,s,o,c,g,w,I,p,T,U="Days of Week",S,M="Times / Week",q,A,L,W,k,y,_,V="Save",N,J;function F(b,u){return b[0].scheduleType==="daysOfWeek"?qe:Be}let O=F(l),D=O(l);return{c(){e=h("form"),n=h("label"),t=P("Name "),a=h("input"),i=z(),s=h("label"),o=P("Description "),c=h("textarea"),g=z(),w=h("label"),I=P(`Schedule Mode
          `),p=h("select"),T=h("option"),T.textContent=U,S=h("option"),S.textContent=M,q=z(),D.c(),A=z(),L=h("label"),W=P("Target / Day "),k=h("input"),y=z(),_=h("button"),_.textContent=V,this.h()},l(b){e=d(b,"FORM",{class:!0});var u=C(e);n=d(u,"LABEL",{class:!0});var v=C(n);t=E(v,"Name "),a=d(v,"INPUT",{maxlength:!0,class:!0}),v.forEach(f),i=j(u),s=d(u,"LABEL",{class:!0});var B=C(s);o=E(B,"Description "),c=d(B,"TEXTAREA",{maxlength:!0,class:!0}),C(c).forEach(f),B.forEach(f),g=j(u),w=d(u,"LABEL",{class:!0});var H=C(w);I=E(H,`Schedule Mode
          `),p=d(H,"SELECT",{class:!0});var R=C(p);T=d(R,"OPTION",{"data-svelte-h":!0}),ee(T)!=="svelte-1h6rpds"&&(T.textContent=U),S=d(R,"OPTION",{"data-svelte-h":!0}),ee(S)!=="svelte-15r49mq"&&(S.textContent=M),R.forEach(f),H.forEach(f),q=j(u),D.l(u),A=j(u),L=d(u,"LABEL",{class:!0});var $=C(L);W=E($,"Target / Day "),k=d($,"INPUT",{type:!0,min:!0,max:!0,class:!0}),$.forEach(f),y=j(u),_=d(u,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),ee(_)!=="svelte-18hqc5v"&&(_.textContent=V),u.forEach(f),this.h()},h(){a.required=!0,m(a,"maxlength",60),m(a,"class","svelte-14cufwt"),m(n,"class","svelte-14cufwt"),m(c,"maxlength",240),m(c,"class","svelte-14cufwt"),m(s,"class","svelte-14cufwt"),T.__value="daysOfWeek",Y(T,T.__value),S.__value="timesPerWeek",Y(S,S.__value),m(p,"class","svelte-14cufwt"),l[0].scheduleType===void 0&&De(()=>l[11].call(p)),m(w,"class","svelte-14cufwt"),m(k,"type","number"),m(k,"min",1),m(k,"max",20),m(k,"class","svelte-14cufwt"),m(L,"class","svelte-14cufwt"),m(_,"type","submit"),m(_,"class","primary svelte-14cufwt"),m(e,"class","svelte-14cufwt")},m(b,u){G(b,e,u),r(e,n),r(n,t),r(n,a),Y(a,l[0].name),r(e,i),r(e,s),r(s,o),r(s,c),Y(c,l[0].description),r(e,g),r(e,w),r(w,I),r(w,p),r(p,T),r(p,S),oe(p,l[0].scheduleType,!0),r(e,q),D.m(e,null),r(e,A),r(e,L),r(L,W),r(L,k),Y(k,l[0].target),r(e,y),r(e,_),N||(J=[Z(a,"input",l[9]),Z(c,"input",l[10]),Z(p,"change",l[11]),Z(k,"input",l[14]),Z(e,"submit",Ce(l[3]))],N=!0)},p(b,u){u&1&&a.value!==b[0].name&&Y(a,b[0].name),u&1&&Y(c,b[0].description),u&1&&oe(p,b[0].scheduleType),O===(O=F(b))&&D?D.p(b,u):(D.d(1),D=O(b),D&&(D.c(),D.m(e,A))),u&1&&ae(k.value)!==b[0].target&&Y(k,b[0].target)},d(b){b&&f(e),D.d(),N=!1,ke(J)}}}function Be(l){let e,n,t,a,i;return{c(){e=h("label"),n=P("Times per Week "),t=h("input"),this.h()},l(s){e=d(s,"LABEL",{class:!0});var o=C(e);n=E(o,"Times per Week "),t=d(o,"INPUT",{type:!0,min:!0,max:!0,class:!0}),o.forEach(f),this.h()},h(){m(t,"type","number"),m(t,"min",1),m(t,"max",7),m(t,"class","svelte-14cufwt"),m(e,"class","svelte-14cufwt")},m(s,o){G(s,e,o),r(e,n),r(e,t),Y(t,l[0].timesPerWeek),a||(i=Z(t,"input",l[13]),a=!0)},p(s,o){o&1&&ae(t.value)!==s[0].timesPerWeek&&Y(t,s[0].timesPerWeek)},d(s){s&&f(e),a=!1,i()}}}function qe(l){let e,n=se(l[5]),t=[];for(let a=0;a<n.length;a+=1)t[a]=me(he(l,n,a));return{c(){e=h("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=d(a,"DIV",{class:!0});var i=C(e);for(let s=0;s<t.length;s+=1)t[s].l(i);i.forEach(f),this.h()},h(){m(e,"class","days svelte-14cufwt")},m(a,i){G(a,e,i);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(a,i){if(i&37){n=se(a[5]);let s;for(s=0;s<n.length;s+=1){const o=he(a,n,s);t[s]?t[s].p(o,i):(t[s]=me(o),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=n.length}},d(a){a&&f(e),be(t,a)}}}function me(l){let e,n=l[22]+"",t,a,i;function s(){return l[12](l[24])}return{c(){e=h("button"),t=P(n),this.h()},l(o){e=d(o,"BUTTON",{type:!0,class:!0});var c=C(e);t=E(c,n),c.forEach(f),this.h()},h(){m(e,"type","button"),m(e,"class","svelte-14cufwt"),ce(e,"active",l[0].days.includes(l[24]))},m(o,c){G(o,e,c),r(e,t),a||(i=Z(e,"click",s),a=!0)},p(o,c){l=o,c&1&&ce(e,"active",l[0].days.includes(l[24]))},d(o){o&&f(e),a=!1,i()}}}function Re(l){let e,n=l[19].days.map(l[15]).join(", ")+"",t;return{c(){e=h("span"),t=P(n)},l(a){e=d(a,"SPAN",{});var i=C(e);t=E(i,n),i.forEach(f)},m(a,i){G(a,e,i),r(e,t)},p:le,d(a){a&&f(e)}}}function je(l){let e,n=ie(l[19])+"",t,a,i=l[19].timesPerWeek+"",s,o;return{c(){e=h("span"),t=P(n),a=P("/"),s=P(i),o=P(" wk")},l(c){e=d(c,"SPAN",{});var g=C(e);t=E(g,n),a=E(g,"/"),s=E(g,i),o=E(g," wk"),g.forEach(f)},m(c,g){G(c,e,g),r(e,t),r(e,a),r(e,s),r(e,o)},p:le,d(c){c&&f(e)}}}function ye(l,e){let n,t,a=e[19].name+"",i,s,o,c,g,w=e[19].streak+"",I,p,T=e[19].bestStreak+"",U,S,M,q,A,L=(e[19].history[te()]||0)+"",W,k,y=e[19].target+"",_,V,N,J="+1",F,O,D;function b(H,R){return H[19].scheduleType==="timesPerWeek"?je:Re}let v=b(e)(e);function B(){return e[16](e[19])}return{key:l,first:null,c(){n=h("div"),t=h("strong"),i=P(a),s=z(),o=h("div"),c=h("span"),g=P("ðŸ”¥ "),I=P(w),p=P(" (best "),U=P(T),S=P(")"),M=z(),v.c(),q=z(),A=h("span"),W=P(L),k=P("/"),_=P(y),V=z(),N=h("button"),N.textContent=J,F=z(),this.h()},l(H){n=d(H,"DIV",{class:!0});var R=C(n);t=d(R,"STRONG",{style:!0});var $=C(t);i=E($,a),$.forEach(f),s=j(R),o=d(R,"DIV",{class:!0});var x=C(o);c=d(x,"SPAN",{});var X=C(c);g=E(X,"ðŸ”¥ "),I=E(X,w),p=E(X," (best "),U=E(X,T),S=E(X,")"),X.forEach(f),M=j(x),v.l(x),q=j(x),A=d(x,"SPAN",{});var ne=C(A);W=E(ne,L),k=E(ne,"/"),_=E(ne,y),ne.forEach(f),x.forEach(f),V=j(R),N=d(R,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(N)!=="svelte-1qgnnsf"&&(N.textContent=J),F=j(R),R.forEach(f),this.h()},h(){Q(t,"font-size",".85rem"),m(o,"class","meta svelte-14cufwt"),m(N,"class","svelte-14cufwt"),m(n,"class","card "+((e[19].history[te()]||0)>=e[19].target?"done":"")+" svelte-14cufwt"),this.first=n},m(H,R){G(H,n,R),r(n,t),r(t,i),r(n,s),r(n,o),r(o,c),r(c,g),r(c,I),r(c,p),r(c,U),r(c,S),r(o,M),v.m(o,null),r(o,q),r(o,A),r(A,W),r(A,k),r(A,_),r(n,V),r(n,N),r(n,F),O||(D=Z(N,"click",B),O=!0)},p(H,R){e=H,v.p(e,R)},d(H){H&&f(n),v.d(),O=!1,D()}}}function ze(l){let e,n,t="OpenHabits (Svelte Prototype)",a,i,s,o="Daily Quests",c,g,w,I,p,T="All Habits",U,S,M=l[1]?"Close":"Add Habit",q,A,L,W,k=[],y=new Map,_,V;function N(u,v){return u[4]().length===0?Le:Ue}let F=N(l)(l),O=l[1]&&ve(l),D=se(K.habits);const b=u=>u[19].id;for(let u=0;u<D.length;u+=1){let v=de(l,D,u),B=b(v);y.set(B,k[u]=ye(B,v))}return{c(){e=h("div"),n=h("h1"),n.textContent=t,a=z(),i=h("div"),s=h("h2"),s.textContent=o,c=z(),F.c(),g=z(),w=h("div"),I=h("div"),p=h("h2"),p.textContent=T,U=z(),S=h("button"),q=P(M),A=z(),O&&O.c(),L=z(),W=h("div");for(let u=0;u<k.length;u+=1)k[u].c();this.h()},l(u){e=d(u,"DIV",{class:!0});var v=C(e);n=d(v,"H1",{class:!0,"data-svelte-h":!0}),ee(n)!=="svelte-1mb0ogl"&&(n.textContent=t),a=j(v),i=d(v,"DIV",{class:!0});var B=C(i);s=d(B,"H2",{style:!0,"data-svelte-h":!0}),ee(s)!=="svelte-1prj10v"&&(s.textContent=o),c=j(B),F.l(B),B.forEach(f),g=j(v),w=d(v,"DIV",{class:!0});var H=C(w);I=d(H,"DIV",{style:!0});var R=C(I);p=d(R,"H2",{style:!0,"data-svelte-h":!0}),ee(p)!=="svelte-x1szhh"&&(p.textContent=T),U=j(R),S=d(R,"BUTTON",{class:!0});var $=C(S);q=E($,M),$.forEach(f),R.forEach(f),A=j(H),O&&O.l(H),L=j(H),W=d(H,"DIV",{class:!0});var x=C(W);for(let X=0;X<k.length;X+=1)k[X].l(x);x.forEach(f),H.forEach(f),v.forEach(f),this.h()},h(){m(n,"class","svelte-14cufwt"),Q(s,"font-size","1rem"),Q(s,"margin",".5rem 0 .6rem"),m(i,"class","section svelte-14cufwt"),Q(p,"font-size","1rem"),Q(p,"margin",".5rem 0 .6rem"),m(S,"class","primary svelte-14cufwt"),Q(I,"display","flex"),Q(I,"align-items","center"),Q(I,"justify-content","space-between"),m(W,"class","habits svelte-14cufwt"),m(w,"class","section svelte-14cufwt"),m(e,"class","app svelte-14cufwt")},m(u,v){G(u,e,v),r(e,n),r(e,a),r(e,i),r(i,s),r(i,c),F.m(i,null),r(e,g),r(e,w),r(w,I),r(I,p),r(I,U),r(I,S),r(S,q),r(w,A),O&&O.m(w,null),r(w,L),r(w,W);for(let B=0;B<k.length;B+=1)k[B]&&k[B].m(W,null);_||(V=Z(S,"click",l[8]),_=!0)},p(u,[v]){F.p(u,v),v&2&&M!==(M=u[1]?"Close":"Add Habit")&&Se(q,M),u[1]?O?O.p(u,v):(O=ve(u),O.c(),O.m(w,L)):O&&(O.d(1),O=null),v&32&&(D=se(K.habits),k=Oe(k,v,b,1,u,D,y,W,Ne,ye,null,de))},i:le,o:le,d(u){u&&f(e),F.d(),O&&O.d();for(let v=0;v<k.length;v+=1)k[v].d();_=!1,V()}}}function Fe(l,e,n){let t={name:"",description:"",scheduleType:"daysOfWeek",days:[0,1,2,3,4,5,6],timesPerWeek:3,target:1},i=new Date().getDay(),s=!1;function o(y){t.days.includes(y)?n(0,t.days=t.days.filter(_=>_!==y),t):n(0,t.days=[...t.days,y],t)}function c(){t.name.trim()&&(t.scheduleType==="daysOfWeek"&&t.days.length===0||(He({...t}),n(0,t={name:"",description:"",scheduleType:"daysOfWeek",days:[0,1,2,3,4,5,6],timesPerWeek:3,target:1}),n(1,s=!1)))}function g(){return K.habits.filter(y=>y.scheduleType==="timesPerWeek"?ie(y)<(y.timesPerWeek||3):y.days.includes(i))}const w=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],I=y=>w[y],p=y=>fe(y.id),T=()=>n(1,s=!s);function U(){t.name=this.value,n(0,t)}function S(){t.description=this.value,n(0,t)}function M(){t.scheduleType=We(this),n(0,t)}const q=y=>o(y);function A(){t.timesPerWeek=ae(this.value),n(0,t)}function L(){t.target=ae(this.value),n(0,t)}return[t,s,o,c,g,w,I,p,T,U,S,M,q,A,L,y=>w[y],y=>fe(y.id)]}class Ke extends Te{constructor(e){super(),Ee(this,e,Fe,ze,Pe,{})}}export{Ke as component};
