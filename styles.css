*{box-sizing:border-box;margin:0;padding:0;}
html{--font-stack:Inter,system-ui,-apple-system,'Segoe UI',Roboto,Ubuntu,sans-serif;}
body{font-family:var(--font-stack);background:var(--grad-app);color:var(--c-text);min-height:100vh;display:flex;-webkit-font-smoothing:antialiased;}

:root{--c-bg:#0d1218;--c-bg-alt:#141b23;--c-surface:#1c2530;--c-surface-alt:#242f3c;--c-border:#2c3a46;--c-border-strong:#3d5060;--c-text:#f5f9fc;--c-text-dim:#9aa8b6;--c-accent:#4d8dff;--c-accent-alt:#7c5dff;--c-accent-rgb:77 141 255;--c-danger:#ff5d5d;--c-success:#3fb563;--radius-xs:6px;--radius-sm:10px;--radius:16px;--radius-lg:24px;--shadow-sm:0 2px 4px -1px rgba(0,0,0,.35);--shadow:0 4px 16px -4px rgba(0,0,0,.5);--grad-app:radial-gradient(circle at 20% 15%,#1e2936,#0d1218 70%);--grad-accent:linear-gradient(135deg,var(--c-accent),var(--c-accent-alt));--trans:160ms cubic-bezier(.4,.22,.2,.95);}
body.light{--c-bg:#f4f7fb;--c-bg-alt:#e7edf3;--c-surface:#ffffff;--c-surface-alt:#ffffff;--c-border:#d7e0ea;--c-border-strong:#c1ccd9;--c-text:#1e2a36;--c-text-dim:#5f6d79;--c-accent:#2962ff;--c-accent-alt:#845dff;--c-accent-rgb:41 98 255;--c-success:#1e9a55;--grad-app:radial-gradient(circle at 25% 20%,#ffffff,#d9e5f0 70%);}

/* Layout */
.layout{flex:1;display:grid;grid-template-columns:300px 1fr;min-height:100vh;width:100%;}
@media (max-width:1000px){.layout{grid-template-columns:240px 1fr;}}
@media (max-width:820px){.layout{grid-template-columns:100%;}.sidebar{position:sticky;top:0;z-index:40;display:flex;flex-wrap:wrap;gap:1rem;padding:1rem 1.1rem;}.sidebar .brand,.sidebar .level-block,.sidebar .streaks-box,.sidebar .sidebar-footer{flex:1 1 160px;order:10}.sidebar .nav{order:20;width:100%;justify-content:flex-start}.sidebar .level-block{order:5}.content{padding-top:.5rem}}

/* Sidebar */
.sidebar{display:flex;flex-direction:column;gap:1.4rem;padding:1.6rem 1.4rem 1.8rem;background:linear-gradient(160deg,var(--c-bg-alt),var(--c-bg));border-right:1px solid var(--c-border);box-shadow:inset -1px 0 0 #ffffff08, var(--shadow-sm);min-height:100%;}
.brand{display:flex;align-items:center;gap:.65rem;font-weight:600;font-size:1.05rem;letter-spacing:.5px;}
.logo-link{text-decoration:none;color:var(--c-text);display:flex;align-items:center;gap:.55rem;font-weight:600;font-size:1.05rem;}
.logo-icon{background:var(--grad-accent);color:#fff;width:40px;height:40px;display:grid;place-items:center;border-radius:12px;font-size:1.15rem;box-shadow:0 4px 14px -4px rgba(var(--c-accent-rgb)/.5);}
.tag.beta{background:var(--grad-accent);color:#fff;font-size:.55rem;padding:4px 7px;border-radius:100px;letter-spacing:1px;box-shadow:0 0 0 1px #ffffff22;text-transform:uppercase;}

.level-block{display:flex;flex-direction:column;align-items:center;gap:.8rem;padding:.9rem .9rem 1rem;background:linear-gradient(155deg,var(--c-surface),var(--c-bg-alt));border:1px solid var(--c-border);border-radius:24px;position:relative;box-shadow:var(--shadow);}
.level-ring{position:relative;width:140px;height:140px;}
.ring{width:140px;height:140px;transform:rotate(-90deg);} 
.ring .track{fill:none;stroke:rgba(255,255,255,.08);stroke-width:12;}
.ring .progress{fill:none;stroke:var(--c-accent);stroke-width:12;stroke-linecap:round;stroke-dasharray:326;stroke-dashoffset:326;transition:stroke-dashoffset .7s var(--trans);filter:drop-shadow(0 2px 6px rgba(var(--c-accent-rgb)/.55));}
.level-center{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px;font-weight:600;}
.lvl-label{font-size:.65rem;letter-spacing:1px;opacity:.65;text-transform:uppercase;}
.lvl-value{font-size:1.65rem;background:linear-gradient(160deg,var(--c-text),var(--c-text-dim));-webkit-background-clip:text;background-clip:text;color:transparent;}
.xp-nums{font-size:.65rem;letter-spacing:.7px;opacity:.75;text-align:center;}

.nav{display:flex;flex-direction:column;gap:.6rem;}
.nav button,.nav .import-label,dialog button{background:linear-gradient(165deg,var(--c-surface),var(--c-surface-alt));color:var(--c-text);border:1px solid var(--c-border);padding:.65rem .85rem .6rem;font-size:.72rem;font-weight:600;letter-spacing:.5px;border-radius:12px;cursor:pointer;display:flex;align-items:center;gap:.55rem;position:relative;transition:var(--trans);}
.nav button.primary{background:var(--grad-accent);border:0;box-shadow:0 4px 16px -4px rgba(var(--c-accent-rgb)/.6);color:#fff;}
.nav button:hover,.nav .import-label:hover,dialog button:hover{filter:brightness(1.1);transform:translateY(-2px);}
.nav button:active{transform:translateY(0);}
.import-label{position:relative;overflow:hidden;justify-content:center;}
.import-label input{position:absolute;inset:0;opacity:0;cursor:pointer;}

.streaks-box{display:flex;flex-wrap:wrap;gap:.4rem;font-size:.55rem;line-height:1.2;letter-spacing:.4px;opacity:.8;}
.streaks-box span{background:var(--c-surface);padding:.35rem .55rem;border-radius:999px;border:1px solid var(--c-border);}
.sidebar-footer{margin-top:auto;font-size:.55rem;letter-spacing:.6px;opacity:.55;}

/* Content Area */
.content{display:flex;flex-direction:column;min-width:0;}
.topbar{display:flex;align-items:center;justify-content:space-between;padding:1.2rem 1.5rem 0.6rem;}
.date{font-size:.75rem;letter-spacing:.55px;opacity:.75;}
.panels-grid{flex:1;display:grid;grid-template-columns:repeat(auto-fill,minmax(340px,1fr));gap:1.35rem;padding:1.1rem 1.4rem 2.2rem;align-content:start;}

/* Panels */
.panel{background:linear-gradient(155deg,var(--c-surface),var(--c-surface-alt));border:1px solid var(--c-border);border-radius:24px;padding:1.15rem 1.2rem 1.35rem;display:flex;flex-direction:column;gap:.9rem;position:relative;box-shadow:var(--shadow);overflow:hidden;min-height:180px;}
.panel:before{content:"";position:absolute;inset:0;background:linear-gradient(145deg,rgba(255,255,255,.05),transparent 60%);pointer-events:none;}
.panel h2{margin:0;font-size:.95rem;font-weight:600;letter-spacing:.5px;display:flex;align-items:center;gap:.5rem;text-transform:uppercase;opacity:.9;}

/* Habits */
.habit-grid{display:grid;gap:.85rem;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));}
.habit-card{background:linear-gradient(155deg,var(--c-surface-alt),var(--c-surface));padding:.85rem .75rem .95rem;border:1px solid var(--c-border);border-radius:18px;display:flex;flex-direction:column;gap:.6rem;position:relative;transition:var(--trans);box-shadow:0 4px 12px -6px rgba(0,0,0,.6);}
.habit-card:after{content:"";position:absolute;inset:0;background:linear-gradient(145deg,rgba(255,255,255,.06),transparent 65%);opacity:0;transition:var(--trans);}
.habit-card:hover:after{opacity:1;}
.habit-card.completed-today{border-color:var(--c-success);box-shadow:0 0 0 1px rgba(63,181,99,.5),0 10px 24px -10px rgba(63,181,99,.55);}
.habit-card h3{margin:0;font-size:.9rem;font-weight:600;letter-spacing:.4px;line-height:1.25;}
.habit-card .desc{font-size:.62rem;letter-spacing:.4px;opacity:.6;min-height:1.2em;}
.habit-card .habit-meta span.schedule-pill{background:var(--c-bg-alt);padding:.25rem .5rem;border-radius:8px;font-size:.55rem;line-height:1;display:inline-flex;align-items:center;gap:.25rem;border:1px solid var(--c-border);}
.habit-card .habit-meta span.schedule-pill[data-mode="timesPerWeek"]{background:linear-gradient(145deg,var(--c-accent-alt),var(--c-accent));color:#fff;border:0;box-shadow:0 2px 6px -2px rgba(var(--c-accent-rgb)/.5);}
.habit-actions{display:flex;gap:.55rem;margin-top:auto;}
.habit-actions button{flex:1;font-size:.6rem;padding:.5rem .5rem .45rem;background:var(--c-bg-alt);border:1px solid var(--c-border);border-radius:10px;cursor:pointer;letter-spacing:.6px;font-weight:600;transition:var(--trans);}
.habit-actions button.do{background:var(--grad-accent);border:0;color:#fff;box-shadow:0 4px 12px -4px rgba(var(--c-accent-rgb)/.65);}
.habit-actions button:hover{filter:brightness(1.08);}
.habit-actions button.do:active{transform:scale(.94);}
.streak{font-size:.55rem;opacity:.7;display:flex;align-items:center;gap:.35rem;letter-spacing:.6px;flex-wrap:wrap;}

/* Achievements */
.achievement{background:linear-gradient(155deg,var(--c-surface-alt),var(--c-surface));border:1px solid var(--c-border);padding:.75rem .8rem;border-radius:18px;font-size:.6rem;display:flex;flex-direction:column;gap:.35rem;position:relative;box-shadow:0 4px 12px -6px rgba(0,0,0,.5);}
.achievement.unlocked{border-color:var(--c-accent);box-shadow:0 0 0 1px rgba(var(--c-accent-rgb)/.55),0 8px 22px -10px rgba(var(--c-accent-rgb)/.5);}
.achievement .title{font-weight:600;font-size:.68rem;letter-spacing:.6px;}
.achievement .reward{font-size:.5rem;opacity:.5;letter-spacing:.5px;}
.achievement .date{position:absolute;top:.5rem;right:.6rem;font-size:.5rem;opacity:.45;}

/* Footer */
.app-footer{margin-top:auto;padding:1.1rem 1.6rem;border-top:1px solid var(--c-border);font-size:.6rem;display:flex;justify-content:space-between;align-items:center;opacity:.65;backdrop-filter:blur(8px);}
.app-footer a{color:var(--c-accent);text-decoration:none;}
.app-footer a:hover{text-decoration:underline;}

/* Dialog */
dialog{border:1px solid var(--c-border-strong);background:linear-gradient(165deg,var(--c-surface),var(--c-surface-alt));color:var(--c-text);border-radius:32px;padding:1.35rem 1.55rem 1.7rem;width:min(520px,92vw);box-shadow:0 10px 45px -10px rgba(0,0,0,.65);}
dialog::backdrop{background:rgba(0,0,0,.55);backdrop-filter:blur(4px);}
dialog form{display:flex;flex-direction:column;gap:1rem;}
dialog input,dialog textarea{width:100%;background:var(--c-bg-alt);border:1px solid var(--c-border);color:var(--c-text);padding:.75rem .8rem;border-radius:14px;font:inherit;resize:vertical;font-size:.75rem;letter-spacing:.4px;}
dialog input:focus,dialog textarea:focus{outline:2px solid var(--c-accent);outline-offset:2px;}
fieldset{border:1px solid var(--c-border);border-radius:18px;padding:.65rem .85rem .7rem;display:flex;flex-wrap:wrap;gap:.5rem;}
fieldset legend{font-size:.58rem;letter-spacing:.9px;font-weight:600;opacity:.65;text-transform:uppercase;}
fieldset label{font-size:.55rem;display:flex;align-items:center;gap:.3rem;background:var(--c-surface);padding:.35rem .65rem;border-radius:10px;letter-spacing:.4px;border:1px solid var(--c-border);}
fieldset input{width:auto;}
menu{display:flex;justify-content:flex-end;gap:.6rem;margin:0;padding-top:.25rem;}
menu button{background:var(--c-surface-alt);border:1px solid var(--c-border);color:var(--c-text);padding:.6rem 1rem .55rem;border-radius:12px;font-size:.68rem;font-weight:600;letter-spacing:.5px;cursor:pointer;transition:var(--trans);}
menu button.primary{background:var(--grad-accent);border:0;color:#fff;box-shadow:0 4px 16px -4px rgba(var(--c-accent-rgb)/.5);}
menu button:hover{filter:brightness(1.07);}

.empty-msg{opacity:.6;font-size:.7rem;letter-spacing:.5px;}

/* Toast */
.toast{border:none;background:var(--grad-accent);color:#fff;padding:.75rem 1.15rem .8rem;border-radius:16px;font-size:.7rem;animation:fadeSlide .5s ease;box-shadow:0 6px 24px -8px rgba(var(--c-accent-rgb)/.7);}
@keyframes fadeSlide{from{opacity:0;transform:translateY(6px);}to{opacity:1;transform:translateY(0);}}
#confetti{position:fixed;inset:0;width:100%;height:100%;pointer-events:none;z-index:60;}

/* Scrollbars */
::-webkit-scrollbar{width:10px;height:10px;}::-webkit-scrollbar-track{background:transparent;}::-webkit-scrollbar-thumb{background:#ffffff1d;border-radius:20px;}::-webkit-scrollbar-thumb:hover{background:#ffffff33;}

/* Accessibility helpers */
.visually-hidden{position:absolute!important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;border:0;}

/* Responsive adjustments */
@media (max-width:640px){.panels-grid{grid-template-columns:1fr;}.habit-grid{grid-template-columns:repeat(auto-fill,minmax(170px,1fr));}.layout{grid-template-columns:100%;}}